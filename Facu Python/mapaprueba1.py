import folium
from folium import IFrame
from folium.plugins import MarkerCluster, HeatMap
import pandas as pd
import plotly.express as px

# Definir la ubicación central del mapa (Tucumán)
tucuman_coords = [-26.81626823736413, -65.21911943256228]

# Crear el mapa con estilo oscuro
mapa_oscuro = folium.Map(location=tucuman_coords, tiles='CartoDB Positron', zoom_start=13)

# Add the BigImage plugin JavaScript to the map
bigimage_js = '<script src="https://raw.githubusercontent.com/IITC-CE/Leaflet.BigImage/master/leaflet.bigimage.js"></script>'
mapa_oscuro.get_root().html.add_child(folium.Element(bigimage_js))

# Optionally, add more JavaScript code if needed
# custom_script = '<script>/* Your custom JS code here */</script>'
# mapa_oscuro.get_root().html.add_child(folium.Element(custom_script))


# Definir ubicaciones de las cámaras de Tucumán PTZ
camaras = {
    '1- PTZ AV FRANCISCO DE AGUIRRE Y AV EJERCITO DEL NORTE': [-26.7888819, -65.2224197],
    '2 - PTZ EMILIO CASTELAR Y AV SIRIA': [-26.796426, -65.2028728],
    '3 - PTZ AV MITRE Y DON BOSCO': [-26.823949, -65.2175451],
    '4 - PTZ AV MITRE Y MARCOS PAZ': [-26.8185751, -65.2160289],
    '5 - PTZ AV TERAN Y EZEQUIEL COLOMBRES': [-26.8604477, -65.2010303],
    '6 - PTZ AV BELGRANO Y LUCAS CORDOBA': [-26.8151865, -65.2182901],
    '7 - PTZ FRIAS SILVA Y SAN LORENZO': [-26.8294733, -65.2254909],
    '8 - PTZ CRISOSTOMO Y PROSPERO MENA': [-26.8288074, -65.2221186],
    '9 - PTZ AV ALEM Y BOLIVAR': [-26.8376857, -65.2208134],
    '10 - PTZ LAVALLE Y MIGUEL LILLO': [-26.8358049, -65.221575],
    '11 - PTZ BOLIVAR Y PROSPERO MENA': [-26.8368669, -65.2244132],
    '12 - PTZ LIBERTAD Y LAMADRID': [-26.8331498, -65.2282356],
    '13 - PTZ MÉXICO Y MARCO AVELLANEDA - PENAL': [-26.8124795, -65.2110011],
    '14 - PTZ HONDURAS Y AV SOLDATI': [-26.8269433, -65.1931006],
    '15 - PTZ AV BENJAMIN ARAOZ Y AV SOLDATI': [-26.8325593, -65.1944759],
    '16 - PTZ AV MATE DE LUNA Y LUCAS CORDOBA': [-26.8274051, -65.2217656],
    '17 - PTZ AV ROCA Y FRIAS SILVA': [-26.8391506, -65.2278622],
    '18 - PTZ AV ROCA Y AV ALEM': [-26.8403922, -65.2215353],
    '19 - PTZ NECOCHEA Y MENDOZA': [26.8207181, -65.2375024],
    '20 - PTZ SAN MARTIN Y SARGENTO CABRAL': [-26.8222556, -65.2363755],
    '21 - PTZ AV GOBERNADOR DEL CAMPO Y CIRCUNVALACION': [-26.8218312, -65.1837567],
    '22 - PTZ SAN JUAN Y SAAVEDRA': [-26.8067821, -65.2289511],
    '23 - PTZ SARGENTO CABRAL Y SANTIAGO': [-26.8165012, -65.2349154],
    '24 - PTZ SANTA FE Y AZCUENAGA': [-26.8130446, -65.2370382],
    '25 - PTZ NECOCHEA Y CORRIENTES': [-26.815984, -65.2363935],
    '26 - PTZ AV EJERCITO DEL NORTE Y MENDOZA': [-26.822299, -65.2315907],
    '27 - PTZ 25 DE MAYO Y CHILE': [-26.8132221, -65.2005151],
    '28 - PTZ AV GOBERNADOR DEL CAMPO Y SALAS Y VALDEZ': [-26.8214727, -65.1851771],
    '29 - PTZ CHILE Y LAPRIDA': [26.810809, -65.1983734],
    '30 - PTZ SAN MARTIN Y MUÑECAS': [-26.8293848, -65.2058912],
    '31 - PTZ 24 DE SEPTIEMBRE Y MAIPU': [-26.8303915, -65.2078255],
    '32 - PTZ SALTA Y SAN JUAN': [-26.8197743, -65.2295771],
    '33 - PTZ 25 DE MAYO Y CORRIENTES': [-26.8228532, -65.2028054],
    '34 - PTZ ITALIA Y MONTEAGUDO': [-26.8140816,-65.1959668],
    '35 - PTZ 24 DE SEPTIEMBRE Y 25 DE MAYO':[-26.8309145,-65.2046832],
    '36 - PTZ AV BRIGIDO TERAN Y CHARCAS':[-26.8345284,-65.1949363],
    '37 - PTZ AV SAENZ PENA Y CRISOSTOMO ALVAREZ':[-26.8338945,-65.1973941],
    '38 - PTZ PARQUE GUILLERMINA SENDERO':[-26.8240367,-65.260453],
    '39 - PTZ AV BENJAMÍN ARAOZ Y AV CORONEL SUAREZ':[-26.8356645,-65.1810025],
    '40 - PTZ MARIANO MORENO Y CRISOSTOMO ALVAREZ':[-26.8336159,-65.1991294],
    '41 - PTZ AZCUENAGA Y DON BOSCO':[-26.8191608,-65.2385893],
    '42 - PTZ AV JUAN B JUSTO Y ESPAÑA':[-26.7986022,-65.1889582],
    '43 - PTZ HOSPITAL DEL NIÑO - RONDEAU':[-26.8388127,-65.2052681],
    '44 - PTZ AV FRANCISCO DE AGUIRRE Y MONTEAGUDO':[-26.7958221,-65.1917752],
    '45 - PTZ AV MATE DE LUNA Y ERNESTO PADILLA':[-26.8231405,-65.2411773],
    '46 - PTZ DEAN FUNES Y PJE ROCA':[-26.8073305,-65.2552406],
    '47 - PTZ CORRIENTES Y BALCARCE':[-26.8239639,-65.1968447],
    '48 - PTZ BOLIVIA Y AV JUAN B JUSTO':[-26.7986022,-65.1889582],
    '50 - PTZ AV INDEPENDENCIA Y CANAL SUR':[26.8660784,-65.2581153],
    '51 - PTZ BOLIVAR Y MATIENZO':[-26.835408,-65.230079],
    '52 - PTZ AV BRIGIDO TERAN Y DOMINGO GARCIA':[-26.8373083,-65.1957402],
    '53 - PTZ CAMINO DEL PERU Y SAN JUAN':[-26.8134871,-65.264131],
    '54 - AV COLON Y MORENTE':[-26.8409169,-65.2362599],
    '55 - DIAGONAL 1 Y ESPANA':[-26.8076489,-65.2498656],
    '56 - JUNIN Y PJE PADILLA':[-26.8252559, -65.2080863],
    '57 - SALTA Y CORDOBA':[-26.8263352,-65.2067634],
    '58 - AV SARMIENTO Y LAPRIDA':[-26.8188919,-65.2002439],
    '59 - AV SALTA Y 24 DE SEPTIEMBRE':[-26.8298291,-65.210953],
    '60 - AV BENJAMIN ARAOZ FACDEF':[-26.8353824,-65.1859054],
    '61 - JUJUY Y CRISOSTOMO ALVAREZ':[-26.8309835,-65.2112101],
    '62 - SANTA FE Y MUÑECAS':[-26.8197797,-65.2035744],
    '63 - SANTIAGO Y JOSE COLOMBRES':[-26.8252074,-65.2129393],
    '64 - ESPAÑA Y DIAGONAL 4':[-26.8050163, -65.2538681],
    '65 - DIAGONAL 7 Y JOSE FRIAS Y ARAUJO':[-26.8051871, -65.2566842],
    '66 - ESPAÑA Y DIAGONAL 4':[-26.8050163, -65.2538681],
    '67 - JOSE FRIAS Y ARAUJO & DIAGONAL 3 & ITALIA (NOROESTE)':[-26.803877942232912, -65.25360502197519],
    '68 - SAN JUAN Y FELIX DE OLAXABAL':[-26.8070792,-65.2528612],
    '69 - JOSE FRIAS Y ARAUJO & DIAGONAL 3 & ITALIA (SUROESTE)':[-26.803720509151976, -65.25347225941464],
    '70 - SAN JUAN Y BULNES':[-26.8051398,-65.2412016],
    '71 - SANTIAGO Y BELISARIO ROLDAN':[-26.8106082,-65.2546887],
    '72 - SANTIAGO Y CASTRO BARROS':[-26.8040126,-65.2440663],
    '73 - SANTIAGO Y GODOY CRUZ':[-26.8088655,-65.2512082],
    '74 - LIZONDO BORDA Y DON BOSCO':[-26.817285,-65.2485878],
    '75 - ITALIA Y DIAGONAL 2':[-26.8060105,-65.251552],
    '76 - AV AMERICA Y PARAGUAY':[-26.8002659,-65.2458852],
    '77 - AV BELGRANO Y BELISARIO ROLDAN':[-26.8080913,-65.254423],
    '78 - AV AVELLANEDA Y MARCOS PAZ':[-26.8228625,-65.1948647],
    '79 - AV CENTRAL Y DIAGONAL 6':[-26.8049075,-65.2559815],
    '80 - DON BOSCO Y GODOY CRUZ':[-26.8166263,-65.252914],
    '81 FEDERICO HELGUERA Y PASAJE TAGLE': [-26.7974452,-65.2415485],
    '82 AYACUCHO Y BOLIVAR': [-26.839556,-65.211617],
    '83 ESPAÑA Y DIAGONAL 9': [-26.8071928,-65.2578441],
    '84 ALSINA Y ENTRE RIOS': [-26.8455594,-65.2034597],
    '85 PARAGUAY Y FELIX DE OLAZABAL': [-26.8070792,-65.2528612],
    '86 CASTRO BARROS Y PJE LUIS SAENZ PEÑA': [-26.7957968,-65.2423793],
    '87 AV AVELLANEDA Y SANTIAGO': [-26.825782,-65.1955632],
    '88 AV AMERICA Y MEXICO': [-26.8030484,-65.2467101],
    '89 BULNES Y VENEZUELA': [-26.8000835,-65.2239879],
    '90 SANTA FE Y GODOY CRUZ': [-26.8100542,-65.2514433],
    '91 SAN MARTIN Y LAPRIDA': [-26.810809,-65.1983734],
    '92 AV MATE DE LUNA Y AMERICA NOROESTE': [-26.8231405,-65.2411773],
    '93 AV AVELLANEDA Y 24 DE SEPTIEMBRE': [-26.8324661,-65.1971602],
    '94 CRISOSTOMO ALVAREZ Y CONGRESO': [-26.8326197,-65.2035843],
    '95 AV MATE DE LUNA Y PELLEGRINI': [-26.8263539,-65.226183],
    '96 GODOY CRUZ Y PJE ROCA': [-26.8080998,-65.2510255],
    '97 CRISOSTOMO ALVAREZ Y CHACABUCO': [-26.8267317,-65.2311604],
    '98 SAN MARTIN Y SALTA': [-26.8230878,-65.2091838],
    '99 9 DE JULIO Y EUDORO ARAOZ': [-26.8619216,-65.2120557],
    '100 AV DEMOCRACIA Y 9 DE JULIO': [-26.8679208,-65.2134483],
    '101 SAN MARTIN Y VIRGEN DE LA MERCED': [-26.830232,-65.2014562],
    '102 SAN MARTIN Y MONTEAGUDO': [-26.8140816,-65.1959668],
    '103 AV MATE DE LUNA Y PATRICIAS ARGENTINAS': [-26.8198653,-65.2566128],
    '104 SAN MARTIN Y MAIPU': [-26.812677,-65.2035481],
    '105 AV AMERICA Y SAN MARTIN': [-26.8195578,-65.2506136],
    '107 SANTIAGO Y VIRGEN DE LA MERCED': [-26.8253751,-65.2003393],
    '108 AV DEMOCRACIA Y 9 DE JULIO': [-26.8679208,-65.2134483],
    '109 AV AMERICA Y SAN JUAN': [-26.8030484,-65.2467101],
    '110 AV MATE DE LUNA Y BULNES': [-26.8221601,-65.2451742],
    '111 MENDOZA Y ROQUE CORREA': [-26.8196022,-65.2432618],
    '112 AV SARMIENTO Y MAIPU': [-26.818123,-65.2046913],
    '113 AV SARMIENTO Y MUÑECAS': [-26.8183881,-65.2033],
    '114 DON BOSCO Y PASO DE LOS ANDES': [-26.8222177,-65.2253088],
    '115 SAN MARTIN Y LIZONDO BORDA': [-26.8198188,-65.2491935],
    '116 AV GOBERNADOR DEL CAMPO Y CORONEL SUAREZ': [-26.8227675,-65.1780442],
    '117 JUAN JOSE PASO Y MENDOZA': [-26.822609,-65.2302501],
    '118 INDEPENDENCIA Y JUJUY': [-26.8635858,-65.2203532],
    '119 ROTONDA SAN CAYETANO': [-26.8469423,-65.20018],
    '120 LA PLATA Y BERNABE ARAOZ': [-26.8544316,-65.2220193],
    '121 AV FRANCISCO DE AGUIRRE Y AV JUAN B JUSTO': [-26.7964097,-65.188441],
    '122 MENDOZA Y ASUNCION': [-26.809492,-65.2188862],
    '123 BOLIVAR Y 9 DE JULIO': [-26.8404722,-65.20706],
    '124 BOLIVAR Y ALBERDI': [-26.8385405,-65.2164407],
    '125 LA PLATA Y LAS HERAS': [-26.8501627,-65.2061352],
    '126 LA PLATA Y 9 DE JULIO': [-26.8618338,-65.2120339],
    '127 INDEPENDENCIA Y MARINA ALFARO': [-26.8519908,-65.2020861],
    '128 JUJUY Y EUDORO ARAOZ': [-26.8604503,-65.219222],
    '129 MENDOZA Y MAIPU': [-26.812677,-65.2035481],
    '131 AV EJERCITO DEL NORTE Y MARCOS PAZ': [-26.8155399,-65.2301374],
    '133 LAS PIEDRAS Y MIGUEL LILLO': [-26.8321109,-65.2212786],
    '134 AUTOPISTA Y EXEQUIEL COLOMBRES': [-26.8596369,-65.2046065],
    '136 SAN MARTIN Y ASUNCION': [-26.8258896,-65.2220756],
    '138 REGISTRO CIVIL DE VILLA LUJAN': [-26.8183448,-65.2308128],
    '139 AV SARMIENTO Y PJE GARCIA': [-26.8199953,-65.195039],
    '140 AV BELGRANO Y PASO DE LOS ANDES': [-26.8144182,-65.2230033],
    '141 FELIX DE OLAZABAL Y CHILE' : [-26.8036617,-65.250509],
    '143 AV FRANCISCO DE AGUIRRE Y REPUBLICA DEL LIBANO': [-26.792086,-65.2103692],
    '144 CATAMARCA Y CORRIENTES': [-26.8212042,-65.2103964],
    '145 AV DEMOCRACIA Y DIAZ VELEZ': [-26.8694484,-65.2049235],
    '146 AV CAMINO DEL PERU Y SALAS Y VALDEZ': [-26.8157566,-65.2644197],
    '221 AV MATE DE LUNA Y FRIAS SILVA': [-26.8268304,-65.2247212],
    '222 AV ALEM Y LAMADRID': [-26.8345085,-65.2200594],
    '223 AV MATE DE LUNA Y AV ALEM': [-26.8282377,-65.2186859],
    '224 AV SARMIENTO Y GOBERNADOR DEL CAMPO': [-26.8200861,-65.194085],
    '225 AV SARMIENTO Y MONTEAGUDO': [-26.8195404,-65.1973418],
    '226 BOLIVIA Y RIVADAVIA': [-26.81241290, -65.19717857634],
    '227 25 DE MAYO Y URUGUAY': [26.8145756,-65.2008261],
    '228 ESPAÑA Y RIVADAVIA': [-26.8050053,-65.1953864],
    '229 PELLEGRINIY BOLIVAR': [-26.838414,-65.2170416],
    '408 SANTA FE Y 12 DE OCTUBRE': [-26.8169685,-65.2172656],
    '411 DIAGONAL 5 E ITALIA': [-26.8045245,-65.2550452],
    '416 MENDOZA Y BELISARIO ROLDAN': [-26.817356,-65.256708],
    '423 AV JUAN B JUSTO Y GOBERNADOR LUCAS CORDOBA': [-26.787534,-65.186463],
    '431 URUGUAY Y GODOY CRUZ': [-26.804274,-65.249472],
    '434 FELIX DE OLAZABAL Y COLOMBIA': [-26.797509,-65.249086],
    '454 AV EJERCITO DEL NORTE Y CHILE': [-26.807706,-65.227499],
    '455 AV EJERCITO DEL NORTE Y SANTIAGO':[-26.818261,-65.230819],
    '474 AV GOBERNADOR DEL CAMPO Y YAMANDU':[-26.824060,-65.172085],


    'DVM 911': [-26.8308, -65.2054],

}


# Definir los vértices del primer cuadrante
Cria_1 = [
    [-26.820677000940847, -65.19145086440366],  # 1
    [-26.837281422252993, -65.19572915186387],  # 2
    [-26.832398955841654, -65.2196544559315],  # 3
    [-26.815969346985412, -65.21540583687901],   # 4
    [-26.820718476371457, -65.19150199017388]  # 5
]

# Dibujar el primer cuadrante
folium.Polygon(locations=Cria_1, color='lightblue', popup='Comisaria 1ra', weight=2, fill=True, fill_opacity=0.4).add_to(mapa_oscuro)

Cria_2 = [
        [-26.83731901520179, -65.19568449192613], #1 Domingo Garcia y Brigido Teran (HACIA EL SUR)
        [-26.845795081692977, -65.19771786560153], #2 Teran y P. Miguel Araoz
        [-26.84520923619724, -65.19974804949257], #3 B. Lopez y P. Miguel Araoz
        [-26.84792995281888, -65.2003615346089], #4 French y La Plata
        [-26.848026545063234, -65.19999163917805], #5
        [-26.84801429165925, -65.20000526169605], #6
        [-26.855060893967718, -65.20189182707344], #7 Carrizo y P.Miguel Araoz     (HACIA EL OESTE)
        [-26.851615700355733, -65.21626357598878], #8 Jujuy y Fortunata Garcia
        [-26.85148259366513, -65.21619091614593], #Codito y Continua
        [-26.850513826042633, -65.22107933588308], #9 Fortunata y Bernabe Araoz
        [-26.846460319594254, -65.22010150737664], #Independencia y Bernabe Araoz  (HACIA EL NORTE)
        [-26.84593235462572, -65.22280227738204], #Independencia y Alem (Codito)
        [-26.832434567019448, -65.21960838924461], #Alem y Las Piedras
        [-26.83463485208804, -65.2073295034382], #Las Piedras 1
        [-26.837347772668373, -65.19565524279422] #Las Piedras 2 - Cierra el Poligono
        ]

# Dibujar el primer cuadrante
folium.Polygon(locations=Cria_2, color='lightblue', popup='Comisaria 2da', weight=2, fill=True, fill_opacity=0.4).add_to(mapa_oscuro)


Cria_3 = [
    [-26.828192223148225, -65.21862542435453], #Alem y Mate de Luna (Hacia el sur)
    [-26.840458878983068, -65.2214874718763], #Roca y Alem
    [-26.83391942960884, -65.25451674436177], #Roca y Adolfo de la Vega
    [-26.83432928611021, -65.25880370355361], #Roca y Canal Sur
    [-26.829228744036545, -65.26099821837802], #Canal Sur
]
        
# Dibujar el primer cuadrante
folium.Polygon(locations=Cria_3, color='lightblue', popup='Comisaria 2da', weight=2, fill=True, fill_opacity=0.4).add_to(mapa_oscuro)

# Añadir un cluster de marcadores al mapa
marker_cluster = MarkerCluster().add_to(mapa_oscuro)

# Añadir marcadores al mapa
for nombre, coords in camaras.items():
    folium.Marker(location=coords,
                  popup=nombre,
                  icon=folium.Icon(icon='camera', color='green', fill_opacity=0.2)).add_to(mapa_oscuro)

# Guardar el mapa como archivo HTML
mapa_oscuro.save("mapa_tucuman.html")

## Mostrar el mapa interactivo con marcadores y mapa de calor
mapa_oscuro